
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#ff6b81" />
  <link rel="manifest" href="manifest.json" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-title" content="Mimi" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="apple-touch-icon" href="heart-512.png" />
  <title>Surprise Mimi</title>
  <style>
    :root{ --bg:#fffaf7; --txt:#333; --dur:850ms; }
    *{ box-sizing:border-box; }
    html, body { height:100%; }
    body{
      margin:0; background:var(--bg); color:var(--txt);
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      height:100dvh; overflow:hidden; text-align:center; font-family:Arial, sans-serif;
    }
    img{
      max-width:90vw; max-height:70vh; border-radius:10px;
      box-shadow:0 4px 15px rgba(0,0,0,.2); user-select:none; -webkit-user-drag:none;
    }
    p{ font-size:1.5em; margin-top:20px; padding:0 20px; }
    .container{ cursor:pointer; position:relative; }

    /* Overlay heart (white) */
    .overlay{
      position:fixed; inset:0; display:grid; place-items:center;
      pointer-events:none; opacity:0; transition:opacity 120ms ease;
    }
    .overlay.active{ opacity:1; }
    .heart{
      width:20vmin; aspect-ratio:1;
      background:#fff;
      -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><path d=\"M50 86 C 20 66, 5 50, 5 31 C 5 18, 16 10, 27 10 C 36 10, 43 15, 50 23 C 57 15, 64 10, 73 10 C 84 10, 95 18, 95 31 C 95 50, 80 66, 50 86 Z\" fill=\"black\"/></svg>') center / contain no-repeat;
              mask: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><path d=\"M50 86 C 20 66, 5 50, 5 31 C 5 18, 16 10, 27 10 C 36 10, 43 15, 50 23 C 57 15, 64 10, 73 10 C 84 10, 95 18, 95 31 C 95 50, 80 66, 50 86 Z\" fill=\"black\"/></svg>') center / contain no-repeat;
      transform: scale(0.05);
    }
    .zoom{ animation: heartZoom var(--dur) ease forwards; }
    @keyframes heartZoom{
      from{ transform: scale(0.05); }
      to{ transform: scale(8); }
    }

    /* Mute button */
    #mute-btn {
      position: fixed;
      top: 10px;
      right: 10px;
      background: rgba(0,0,0,0.6);
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 20px;
      font-size: 14px;
      cursor: pointer;
      z-index: 10;
    }
  </style>
</head>
<body onclick="nextSlide()">
  <button id="mute-btn" onclick="toggleMute(event)">ðŸ”Š Son</button>
  <div class="container">
    <img id="slide-img" src="https://i.imgur.com/DCDNgl0.jpeg" alt="Anniversaire Mimi" />
    <p id="slide-text">Tu es belle, mÃªme dans la plus simple des versions de toi.</p>
  </div>

  <!-- White heart overlay -->
  <div id="overlay" class="overlay" aria-hidden="true">
    <div id="heart" class="heart"></div>
  </div>

  <audio id="music" src="anniversaire_lingala_96kbps.mp3" autoplay muted loop></audio>

  <script>
    const slides = [
      {"img":"https://i.imgur.com/DCDNgl0.jpeg","text":"Tu es belle, mÃªme dans la plus simple des versions de toi."},
      {"img":"https://i.imgur.com/b3LdfWF.jpeg","text":"Toi, les photos, câ€™est une histoire dâ€™amourâ€¦ et chaque clichÃ© est une Å“uvre."},
      {"img":"https://i.imgur.com/Fshz30s.jpeg","text":"Ta gentillesse Ã©claire mes journÃ©es comme un soleil doux."},
      {"img":"https://i.imgur.com/VzijnKr.jpeg","text":"DerriÃ¨re ton regard tendre, il y a une femme forte, qui avance toujours."},
      {"img":"https://i.imgur.com/lmDRmCC.jpeg","text":"MÃªme au travail, tu rayonnesâ€¦ ton sÃ©rieux mâ€™impressionne."},
      {"img":"https://i.imgur.com/lI71y3V.jpeg","text":"Toi + Moi = Nous. Et câ€™est ma plus belle Ã©quation."},
      {"img":"https://i.imgur.com/ILIxWIL.jpeg","text":"Hey toi, lÃ , derriÃ¨re ton Ã©cranâ€¦ il paraÃ®t que câ€™est ton anniversaire ðŸŽ‰ðŸ‘€"},
      {"img":"https://i.imgur.com/Xkn7Wtl.jpeg","text":"Chaque seconde Ã  tes cÃ´tÃ©s est prÃ©cieuse. Samsung Galaxy Watch 7... rien que pour toi â¤ï¸"}
    ];

    let current = 0;
    const baseImg = document.getElementById('slide-img');
    const baseText = document.getElementById('slide-text');
    const overlay = document.getElementById('overlay');
    const heart = document.getElementById('heart');
    const music = document.getElementById('music');
    const muteBtn = document.getElementById('mute-btn');

    // Try to unmute after 1s (works on beaucoup de navigateurs)
    window.addEventListener('load', () => {
      setTimeout(() => { 
        if (music.muted) { 
          music.muted = false;
        }
      }, 1000);
    });

    function nextSlide(){
      const next = (current + 1) % slides.length;

      // Start overlay animation
      overlay.classList.add('active');
      heart.classList.remove('zoom'); // reset
      void heart.offsetWidth; // reflow to restart animation
      heart.classList.add('zoom');

      // Change image near end of animation so the white heart hides the swap
      const dur = 850; // must match --dur
      setTimeout(() => {
        baseImg.src = slides[next].img;
        baseText.textContent = slides[next].text;
      }, Math.floor(dur * 0.75)); // swap at 75%

      // Hide overlay slightly after animation completes
      setTimeout(() => {
        overlay.classList.remove('active');
        current = next;
      }, dur + 80);
    }

    function toggleMute(e){
      e.stopPropagation();
      music.muted = !music.muted;
      muteBtn.textContent = music.muted ? "ðŸ”‡ Muet" : "ðŸ”Š Son";
    }
  </script>
</body>
</html>
